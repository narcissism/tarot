<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tarot</title>

<style>
body {
  margin: 0;
  height: 100vh;
  background: #111;
  color: #eee;
  font-family: serif;
  display: flex;
}

#controls {
  width: 200px;
  padding: 20px;
  background: #222;
  border-right: 1px solid #444;
}

button {
  width: 100%;
  margin-bottom: 12px;
  padding: 10px;
  background: #333;
  color: #eee;
  border: 1px solid #555;
  border-radius: 6px;
  cursor: pointer;
}

button:hover { background: #444; }

#fan-container {
  flex: 1;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* ===== CARD FLIP SYSTEM ===== */

.card {
  position: absolute;
  width: 140px;
  height: 220px;
  perspective: 1000px;
  cursor: pointer;
}

.card-inner {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.8s ease;
}

.card.flipped .card-inner {
  transform: rotateY(180deg);
}

.card-face {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  background-size: cover;
  background-position: center;
  border-radius: 10px;
  box-shadow: 0 10px 24px rgba(0,0,0,0.7);
}

.card-front {
  transform: rotateY(180deg);
}

</style>
</head>

<body>

<div id="controls">
  <button onclick="deal('single')">Single Card</button>
  <button onclick="deal('three')">Past · Present · Future</button>
  <button onclick="deal('celtic')">Celtic Cross</button>
</div>

<div id="fan-container"></div>

<script>
const CARD_BACK = "cards/back.jpg";

/* ===== POSITIONS ===== */

const spreads = {
  single: [{ x: 0, y: 0 }],
  three: [
    { x: -180, y: 0 },
    { x: 0, y: 0 },
    { x: 180, y: 0 }
  ],
  celtic: [
    { x: 0, y: 0 },      // 1
    { x: 0, y: 0 },      // 2 crossing
    { x: -120, y: -140 },
    { x: 120, y: -140 },
    { x: -120, y: 140 },
    { x: 120, y: 140 },
    { x: 300, y: -180 },
    { x: 300, y: -90 },
    { x: 300, y: 0 },
    { x: 300, y: 90 }
  ]
};

/* ===== SHUFFLE ===== */

function shuffle(arr) {
  return [...arr].sort(() => Math.random() - 0.5);
}

/* ===== DEAL ===== */

const container = document.getElementById("fan-container");

function deal(type) {
  container.innerHTML = "";
  const positions = spreads[type];
  const cards = shuffle(deck);

  positions.forEach((pos, i) => {
    const card = document.createElement("div");
    card.className = "card";
    card.style.transform = `translate(${pos.x}px, ${pos.y}px)`;
    card.style.zIndex = i + 1;

    const inner = document.createElement("div");
    inner.className = "card-inner";

    const back = document.createElement("div");
    back.className = "card-face";
    back.style.backgroundImage = `url(${CARD_BACK})`;

    const front = document.createElement("div");
    front.className = "card-face card-front";
    front.style.backgroundImage = `url(${cards[i].img})`;

    // Celtic Cross card #2 sideways
    if (type === "celtic" && i === 1) {
      card.style.transform += " rotate(90deg)";
    }

    card.addEventListener("click", () => {
      card.classList.toggle("flipped");
    });

    inner.appendChild(back);
    inner.appendChild(front);
    card.appendChild(inner);
    container.appendChild(card);
  });
}

/* ===== FULL 78-CARD DECK ===== */

const deck = [
  { img: "cards/major/00_Fool.jpg" },
  { img: "cards/major/01_Magician.jpg" },
  { img: "cards/major/02_High_Priestess.jpg" },
  { img: "cards/major/03_Empress.jpg" },
  { img: "cards/major/04_Emperor.jpg" },
  { img: "cards/major/05_Hierophant.jpg" },
  { img: "cards/major/06_Lovers.jpg" },
  { img: "cards/major/07_Chariot.jpg" },
  { img: "cards/major/08_Strength.jpg" },
  { img: "cards/major/09_Hermit.jpg" },
  { img: "cards/major/10_Wheel.jpg" },
  { img: "cards/major/11_Justice.jpg" },
  { img: "cards/major/12_Hanged_Man.jpg" },
  { img: "cards/major/13_Death.jpg" },
  { img: "cards/major/14_Temperance.jpg" },
  { img: "cards/major/15_Devil.jpg" },
  { img: "cards/major/16_Tower.jpg" },
  { img: "cards/major/17_Star.jpg" },
  { img: "cards/major/18_Moon.jpg" },
  { img: "cards/major/19_Sun.jpg" },
  { img: "cards/major/20_Judgement.jpg" },
  { img: "cards/major/21_World.jpg" },
  ...["cups","wands","swords","pentacles"].flatMap(suit =>
    Array.from({length:14}, (_,i)=>({
      img:`cards/${suit}/${suit}${String(i+1).padStart(2,"0")}.jpg`
    }))
  )
];
</script>

</body>
</html>
